<!DOCTYPE html>
<html lang="en">
<head>
		<!-- Bootstrap CSS -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
		<style>
			.modal-backdrop.show { z-index: 2050 !important; }
			.modal { z-index: 2100 !important; }
		</style>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<title>ROI - Marketing & Technology Agency</title>
    <link rel="icon" type="image/png" href="../images/logo.png">
	<link rel="stylesheet" href="./dashboard.css">
	<link rel="stylesheet" href="../styles.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
		<!-- Logout Confirmation Modal -->
		<div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="logoutModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered">
				<div class="modal-content">
					<div class="modal-header border-0" style="justify-content:center;">
						<h5 class="modal-title w-100 text-center" id="logoutModalLabel" style="font-weight:700;">Logout Confirmation</h5>
						<button type="button" class="btn-close position-absolute end-0 me-3" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body text-center" style="font-size:1.15rem; color:#222; padding:24px 12px 12px 12px;">
						<i class="fa fa-sign-out-alt" style="font-size:2.2rem; color:#2ca6a4; margin-bottom:12px;"></i><br>
						Are you sure you want to logout?
					</div>
					<div class="modal-footer border-0" style="justify-content:center; gap:18px; padding-bottom:24px;">
						<button type="button" class="btn btn-secondary px-4" data-bs-dismiss="modal" style="border-radius:8px;">Cancel</button>
						<button type="button" class="btn btn-primary px-4" id="confirmLogout" style="border-radius:8px; background:#218a8a; border:none;">Yes</button>
					</div>
				</div>
			</div>
		</div>

		<!-- Delete Confirmation Modal -->
		<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered">
				<div class="modal-content">
					<div class="modal-header border-0" style="justify-content:center;">
						<h5 class="modal-title w-100 text-center" id="deleteModalLabel" style="font-weight:700;">Delete Service</h5>
						<button type="button" class="btn-close position-absolute end-0 me-3" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body text-center" style="font-size:1.15rem; color:#222; padding:24px 12px 12px 12px;">
						<i class="fa fa-trash" style="font-size:2.2rem; color:#d9534f; margin-bottom:12px;"></i><br>
						Do you want to delete this service?
					</div>
					<div class="modal-footer border-0" style="justify-content:center; gap:18px; padding-bottom:24px;">
						<button type="button" class="btn btn-secondary px-4" data-bs-dismiss="modal" style="border-radius:8px;">No</button>
						<button type="button" class="btn btn-danger px-4" id="confirmDelete" style="border-radius:8px; background:#d9534f; border:none;">Yes</button>
					</div>
				</div>
			</div>
		</div>

		<div class="dashboard-container">
		<!-- Sidebar -->
		<aside class="sidebar">
			<div class="sidebar-content">
				<div class="sidebar-header">
					<img src="../images/logo.png" alt="Company Logo" class="company-logo">
					<h2>ROYAL ORBIT<br>INNOVATIONS</h2>
				</div>
				<nav class="sidebar-nav">
					<ul>
						<li><a href="/admin/dashboard" style="color:inherit;text-decoration:none;display:flex;align-items:center;"><i class="fa fa-th-large"></i> Dashboard</a></li>
						<li><a href="/admin/email" style="color:inherit;text-decoration:none;display:flex;align-items:center;"><i class="fa fa-envelope"></i> Emails</a></li>
						<li><a href="/admin/blog" style="color:inherit;text-decoration:none;display:flex;align-items:center;"><i class="fa fa-blog"></i> Blogs</a></li>
						<li><a href="/admin/clients" style="color:inherit;text-decoration:none;display:flex;align-items:center;"><i class="fa fa-users"></i> Clients</a></li>
						<li class="active"><a href="/admin/services" style="color:inherit;text-decoration:none;display:flex;align-items:center;"><i class="fa fa-cogs"></i> Services</a></li>
						<li><a href="/admin/industries" style="color:inherit;text-decoration:none;display:flex;align-items:center;"><i class="fa fa-industry"></i> Industries</a></li>
					</ul>
				</nav>
			</div>
			<div class="sidebar-bottom">
				<ul>
					<li><a href="/admin/setting" style="color:inherit;text-decoration:none;display:flex;align-items:center;"><i class="fa fa-user-cog"></i> Setting</a></li>
					<li id="logoutBtn" style="cursor:pointer;"><i class="fa fa-sign-out-alt"></i> Logout</li>
				</ul>
			</div>
		</aside>

		<!-- Main Content -->
		<main class="main-panel" style="display:flex; flex-direction:column; height:100vh;">
			<!-- Top Bar -->
			<div class="top-bar" style="position:sticky; top:0; z-index:2; background:#fff;">
				<h1>Services</h1>
				<div class="top-bar-right">
					<div class="search-bar">
						<input type="text" placeholder="Search">
						<button><i class="fa fa-search"></i></button>
					</div>
					<div class="admin-profile">
						<img src="../images/man.png" alt="Admin" class="profile-pic">
						<span>Mr. Kaleel</span>
					</div>
				</div>
			</div>

			<!-- Services View Panel -->
			<div class="services-panel" style="background:#fff; border-radius:16px; margin-top:32px; width:100%; max-width:none; box-shadow:0 2px 12px rgba(44,166,164,0.06); padding:32px 0 0 0; flex:1;">
				<div style="display:flex; gap:32px; padding:0 32px 24px 32px;">
					<div style="display:flex; align-items:center; background:#f7f8fa; border-radius:8px; padding:6px 18px; font-size:1rem; font-weight:500;">
						Total Services <span style="margin-left:16px; font-size:1rem; font-weight:normal;">21</span>
					</div>
					<div style="flex:1; display:flex; align-items:center; background:#f7f8fa; border-radius:8px; padding:6px 18px;">
						<input type="text" id="serviceSearch" placeholder="Search" style="border:none; background:transparent; font-size:1rem; width:100%; outline:none;">
						<button style="background:none; border:none; color:#222; font-size:1.3rem; cursor:pointer;" onclick="filterServices()"><i class="fa fa-search"></i></button>
					</div>
				</div>
				<div style="padding:0 32px;">
					<table style="width:100%; border-collapse:collapse;">
						<tbody id="servicesTableBody">
						</tbody>
					</table>
				</div>
				<div style="display:flex; justify-content:flex-end; align-items:center; gap:24px; padding:32px 32px;">
					   <button class="action-btn update-btn">Update Services</button>
					   <button class="action-btn add-btn" id="addServiceBtn" data-bs-toggle="modal" data-bs-target="#addServiceModal">
						   <span class="add-icon-circle"><i class="fa fa-plus"></i></span>
						   Add new service
					   </button>
	   <!-- Add New Service Modal -->
	   <div class="modal fade" id="addServiceModal" tabindex="-1" aria-labelledby="addServiceModalLabel" aria-hidden="true">
		   <div class="modal-dialog modal-lg modal-dialog-centered">
			   <div class="modal-content">
				   <div class="modal-header">
					   <h5 class="modal-title" id="addServiceModalLabel">New Services</h5>
					   <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				   </div>
				   <div class="modal-body">
					   <form id="serviceForm">
						   <div class="row mb-3">
							<div class="col-md-4">
								<label class="form-label">Total Services</label>
								<input type="text" class="form-control" value="21" readonly>
							</div>
						   </div>
						   <div class="mb-3">
							   <label class="form-label">Service Name <span class="text-danger">*</span></label>
							   <input type="text" class="form-control required-field" id="serviceName" placeholder="Type your service name here...." required>
						   </div>
						   <div class="mb-3">
							   <label class="form-label">Upload Image <span class="text-danger">*</span></label>
							   <div class="input-group">
								   <input type="file" class="form-control" id="serviceUploadImage" accept="image/*">
								   <button class="btn btn-outline-secondary" type="button" id="serviceUploadBtn"><i class="fa fa-upload"></i></button>
							   </div>
							   <img id="servicePreviewImg" src="#" alt="Preview" style="max-width:120px; margin-top:10px; display:none;" />
						   </div>
						   <div class="mb-3">
							   <label class="form-label">Service Description <span class="text-danger">*</span></label>
							   <textarea class="form-control required-field" id="serviceDesc" rows="3" placeholder="Write About Service...." required></textarea>
						   </div>
					   </form>
				   </div>
				   <div class="modal-footer">
					   <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
					   <button type="button" class="btn btn-success" id="updateServiceBtn">Update Services</button>
					   <button type="button" class="btn btn-primary" id="addNewServiceBtn">Add new service</button>
				   </div>
			   </div>
		   </div>
	   </div>

	   <!-- Confirmation Modal -->
	   <div class="modal fade" id="confirmAddServiceModal" tabindex="-1" aria-labelledby="confirmAddServiceModalLabel" aria-hidden="true">
		   <div class="modal-dialog modal-dialog-centered">
			   <div class="modal-content">
				   <div class="modal-header">
					   <h5 class="modal-title w-100 text-center" id="confirmAddServiceModalLabel">Confirm Add Service</h5>
					   <button type="button" class="btn-close position-absolute end-0 me-3" data-bs-dismiss="modal" aria-label="Close"></button>
				   </div>
				   <div class="modal-body text-center" style="border-bottom:1px solid #eee;">
					   <i class="fa fa-check-circle" style="font-size:2.2rem; color:#2ca6a4; margin-bottom:12px;"></i><br>
					   <span style="font-size:1.15rem; color:#222;">Please confirm:<br>Do you want to add this service to the system?</span>
				   </div>
				   <div class="modal-footer justify-content-center" style="gap:16px;">
					   <button type="button" class="btn btn-secondary px-4" id="noAddServiceBtn">No</button>
					   <button type="button" class="btn btn-success px-4" id="yesAddServiceBtn">Yes</button>
				   </div>
			   </div>
		   </div>
	   </div>

	   <!-- Success Modal -->
	   <div class="modal fade" id="successServiceModal" tabindex="-1" aria-labelledby="successServiceModalLabel" aria-hidden="true">
		   <div class="modal-dialog modal-dialog-centered">
			   <div class="modal-content">
				   <div class="modal-header">
					   <h5 class="modal-title" id="successServiceModalLabel">Service Successfully Added</h5>
					   <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				   </div>
				   <div class="modal-body text-center">
					   <i class="fa fa-check-circle" style="font-size:2.2rem; color:#2ca6a4; margin-bottom:12px;"></i><br>
					   <span style="font-size:1.15rem; color:#222;">Thank you! The new service has been added to the system.<br>Would you like to add another service or return to the dashboard?</span>
				   </div>
				   <div class="modal-footer justify-content-center" style="gap:16px;">
					   <button type="button" class="btn btn-outline-secondary px-4" data-bs-dismiss="modal">Return to Dashboard</button>
					   <button type="button" class="btn btn-primary px-4" id="addAnotherServiceBtn">Add Another Service</button>
				   </div>
			   </div>
		   </div>
	   </div>
<script>
// Add style for invalid fields
var style = document.createElement('style');
style.innerHTML = `.is-invalid { border-color: #dc3545 !important; box-shadow: 0 0 0 0.2rem rgba(220,53,69,.25) !important; }`;
document.head.appendChild(style);
document.addEventListener('DOMContentLoaded', function() {
	// Service categories (example)
	var serviceCategories = [
		'Pay Per Click',
		'SEO',
		'Website Development',
		'Social Media Management',
		'Google My Business',
		'Landing Page Design',
		'API Development'
	];

	// Upload image logic
	document.getElementById('serviceUploadBtn').addEventListener('click', function() {
		document.getElementById('serviceUploadImage').click();
	});
	document.getElementById('serviceUploadImage').addEventListener('change', function(e) {
		var file = e.target.files[0];
		var preview = document.getElementById('servicePreviewImg');
		if (file) {
			var reader = new FileReader();
			reader.onload = function(ev) {
				preview.src = ev.target.result;
				preview.style.display = 'block';
			};
			reader.readAsDataURL(file);
		} else {
			preview.style.display = 'none';
		}
	});

	// Add new service button logic
	document.getElementById('addNewServiceBtn').addEventListener('click', function() {
		// Validate required fields
		var valid = true;
			var requiredFields = document.querySelectorAll('#serviceName, #serviceDesc');
		requiredFields.forEach(function(field) {
			if (!field.value || field.value.trim() === '') {
				field.classList.add('is-invalid');
				valid = false;
			} else {
				field.classList.remove('is-invalid');
			}
		});
		// Image required
		var imageInput = document.getElementById('serviceUploadImage');
		if (!imageInput.files || imageInput.files.length === 0) {
			imageInput.classList.add('is-invalid');
			valid = false;
		} else {
			imageInput.classList.remove('is-invalid');
		}
		if (!valid) {
			// Scroll to first invalid field
			var firstInvalid = document.querySelector('.is-invalid');
			if (firstInvalid) firstInvalid.scrollIntoView({behavior:'smooth', block:'center'});
			return;
		}
		var confirmModal = new bootstrap.Modal(document.getElementById('confirmAddServiceModal'));
		confirmModal.show();
	});

	// Confirmation modal logic
	document.getElementById('yesAddServiceBtn').addEventListener('click', function() {
		var confirmModalEl = document.getElementById('confirmAddServiceModal');
		var confirmModal = bootstrap.Modal.getInstance(confirmModalEl);
		confirmModal.hide();
		var addServiceModalEl = document.getElementById('addServiceModal');
		var addServiceModal = bootstrap.Modal.getInstance(addServiceModalEl);
		addServiceModal.hide();
		// Clear form and image preview
		document.getElementById('serviceForm').reset();
		document.getElementById('servicePreviewImg').style.display = 'none';
		// Remove invalid state
		document.querySelectorAll('.is-invalid').forEach(function(f){f.classList.remove('is-invalid');});
		document.getElementById('serviceUploadImage').classList.remove('is-invalid');
		var successModal = new bootstrap.Modal(document.getElementById('successServiceModal'));
		successModal.show();
	});

	// Success modal: Add Another button logic
	document.getElementById('addAnotherServiceBtn').addEventListener('click', function() {
		var successModalEl = document.getElementById('successServiceModal');
		var successModal = bootstrap.Modal.getInstance(successModalEl);
		successModal.hide();
		// Reopen the add service modal, form is already cleared
		var addServiceModalEl = document.getElementById('addServiceModal');
		var addServiceModal = new bootstrap.Modal(addServiceModalEl);
		addServiceModal.show();
	});

	document.getElementById('noAddServiceBtn').addEventListener('click', function() {
		var confirmModalEl = document.getElementById('confirmAddServiceModal');
		var confirmModal = bootstrap.Modal.getInstance(confirmModalEl);
		confirmModal.hide();
		if (confirm('Do you want to close the form and clear all provided details?')) {
			document.getElementById('serviceForm').reset();
			document.getElementById('servicePreviewImg').style.display = 'none';
			var addServiceModalEl = document.getElementById('addServiceModal');
			var addServiceModal = bootstrap.Modal.getInstance(addServiceModalEl);
			addServiceModal.hide();
		}
	});
});
</script>
				</div>
				<style>
				.action-btn {
					background: #2ca6a4;
					color: #fff;
					border: none;
					border-radius: 20px;
					padding: 8px 24px;
					font-size: 1rem;
					min-width: 170px;
					min-height: 44px;
					display: flex;
					align-items: center;
					justify-content: center;
					gap: 8px;
					cursor: pointer;
					transition: background 0.2s, color 0.2s;
				}
				.action-btn:hover {
					background: #00796b;
					color: #fff;
				}
				.add-icon-circle {
					color: #ffffff;
					border-radius: 50%;
					width: 28px;
					height: 28px;
					display: flex;
					align-items: center;
					justify-content: center;
					font-size: 1.2rem;
					transition: background 0.2s, color 0.2s;
				}
				.add-btn:hover .add-icon-circle {
					background: #00796b;
					color: #fff;
				}
				/* Increase gap between service rows */
				#servicesTableBody tr {
					border-bottom: 1px solid #eee;
					height: 56px;
				}
				</style>
			</div>
			<script>
			const services = [
			  "Pay Per Click Services",
			  "Search Engine Optimization Services",
			  "Website Development Services",
			  "Social Media Management Services",
			  "Google My Business Management",
			  "Landing Page Design",
			  "API Development Services"
			];

						let deleteIndex = null;
						function renderServices(list) {
							const tbody = document.getElementById('servicesTableBody');
							tbody.innerHTML = '';
							list.forEach((s, i) => {
								tbody.innerHTML += `<tr>
									<td><input type='checkbox'></td>
									<td>${s}</td>
									<td style='text-align:right;'><i class='fa fa-trash' style='color:#222; cursor:pointer;' data-index='${i}'></i></td>
								</tr>`;
							});
							// Add event listeners for trash icons
							Array.from(document.querySelectorAll('.fa-trash[data-index]')).forEach(icon => {
								icon.addEventListener('click', function() {
									deleteIndex = parseInt(this.getAttribute('data-index'));
									var deleteModal = new bootstrap.Modal(document.getElementById('deleteModal'));
									deleteModal.show();
								});
							});
						}

			function filterServices() {
			  const search = document.getElementById('serviceSearch').value.toLowerCase();
			  renderServices(services.filter(s => s.toLowerCase().includes(search)));
			}

						document.getElementById('serviceSearch').addEventListener('input', filterServices);
						window.onload = function() { renderServices(services); };

						// Delete modal logic
						document.addEventListener('DOMContentLoaded', function() {
							var confirmDelete = document.getElementById('confirmDelete');
							confirmDelete.addEventListener('click', function() {
								if (deleteIndex !== null && services[deleteIndex]) {
									services.splice(deleteIndex, 1);
									renderServices(services);
									deleteIndex = null;
									// Always hide the modal using the static method
									var deleteModalEl = document.getElementById('deleteModal');
									var modalInstance = bootstrap.Modal.getInstance(deleteModalEl);
									if (modalInstance) {
										modalInstance.hide();
									} else {
										// fallback: manually remove 'show' class and backdrop
										deleteModalEl.classList.remove('show');
										deleteModalEl.setAttribute('aria-hidden', 'true');
										document.body.classList.remove('modal-open');
										let backdrop = document.querySelector('.modal-backdrop');
										if (backdrop) backdrop.remove();
									}
								}
							});
						});
			</script>
		</main>
	</div>
</body>
	<!-- Bootstrap JS (must be last) -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
	<script>
		document.addEventListener('DOMContentLoaded', function() {
			// Logout modal logic
			var logoutBtn = document.getElementById('logoutBtn');
			var logoutModalEl = document.getElementById('logoutModal');
			var confirmLogout = document.getElementById('confirmLogout');
			var logoutModal = new bootstrap.Modal(logoutModalEl);
			logoutBtn.addEventListener('click', function() {
				logoutModal.show();
			});
			confirmLogout.addEventListener('click', function() {
				window.location.href = '../';
			});
		});
	</script>
</html>
